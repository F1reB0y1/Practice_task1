#include <stdio.h>     // Підключення бібліотеки для вводу/виводу
#include <stdlib.h>    // Підключення бібліотеки для генерації випадкових чисел
#include <time.h>      // Підключення бібліотеки для роботи з часом
#include <ctype.h>     // Підключення бібліотеки для роботи з символами

int main() {
    int numChars;                 // Змінна для зберігання кількості символів, які введе користувач
    printf("Введіть кількість символів для шифрування: "); // Запит на введення кількості символів
    scanf("%d", &numChars);      // Зчитування кількості символів

    // Перевірка на коректність введення
    if (numChars <= 0) {         // Якщо введене число менше або дорівнює нулю
        printf("Некоректне введення.\n"); // Виведення повідомлення про помилку
        return 1;                // Завершення програми з кодом помилки
    }

    srand(time(NULL));           // Ініціалізація генератора випадкових чисел
    int key = rand() % 513 - 256; // Генерація випадкового ключа шифрування в діапазоні [-256, 256]
    printf("Згенерований ключ шифрування: %d\n", key); // Виведення згенерованого ключа

    for (int i = 0; i < numChars; i++) { // Цикл для введення символів
        char inputChar;            // Змінна для зберігання введеного символу
        printf("Введіть символ %d: ", i + 1); // Запит на введення символу
        scanf(" %c", &inputChar);  // Зчитування символу

        // Перевірка, чи символ є літералом
        if (!isalpha(inputChar)) { // Якщо символ не є літерою
            printf("Некоректне введення: повинен бути дійсний алфавітний символ\n"); // Повідомлення про помилку
            i--; // Зменшення лічильника, щоб повторити введення для цього символу
            continue; // Продовження до наступної ітерації циклу
        }

        // Конвертація символу до нижнього регістру
        char base = isupper(inputChar) ? 'A' : 'a'; // Визначення бази для верхнього або нижнього регістру
        char encryptedChar = (inputChar - base + key) % 26 + base; // Шифрування символу за допомогою ключа

        printf("Зашифрований символ: %c\n", encryptedChar); // Виведення зашифрованого символу
    }

    return 0; // Завершення програми
}